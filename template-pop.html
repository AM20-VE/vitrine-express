<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow" />
    <title id="meta-title"></title>
    <meta name="description" id="meta-desc" content="">
    <link id="favicon" rel="icon" type="image/webp" href="">
    <link id="favicon-apple" rel="apple-touch-icon" href="">
<style>
    :root {
        --color-dark: #2c1c3b;
        --color-background-light: #F2F4F7; 
        --color-accent: #eb6b15; 
        --color-light-text: #f0e8e8;
        --color-dark-text: #050505;
        --font-main: 'Segoe UI Rounded', 'Quicksand', 'Ubuntu', 'Jost', system-ui, -apple-system, sans-serif;
        --radius: 20px; 
        --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; font-size: 16px;}
    body { font-family: var(--font-main); background-color: var(--color-background-light); color: var(--color-dark-text); line-height: 1.6; overflow-x: hidden; }
/* Layout général */
    .section { width: 100%; padding: 80px 5%; background: var(--color-background-light); border-bottom: 1px solid rgba(0,0,0,0.05); }
    .bg-accent { background-color: var(--color-accent); }
    .bg-dark { background-color: var(--color-dark); color: var(--color-light-text); }
/* Typographies */
    h1, h2, h3 { font-weight: 800; line-height: 1.1; letter-spacing: -0.02em; }
    h1 { font-size: clamp(2.5rem, 8vw, 5rem); margin-bottom: 2rem; color: var(--color-dark); }
    h2 { font-size: clamp(2rem, 5vw, 3rem); margin-bottom: 3rem; text-align: center; color: var(--color-dark) }
    h3 { font-size: 1.8rem; margin-bottom: 1rem; }
/* Boutons */
    .cta-button { display: inline-block; padding: 16px 32px; background: var(--color-background-light); color: var(--color-dark); border: 3px solid var(--color-dark) ; border-radius: var(--radius); font-weight: 700; text-decoration: none; cursor: pointer; box-shadow: 8px 8px 0px var(--color-dark) ; }
    .cta-button:hover { transform: translate(-2px, -2px);
    box-shadow: 12px 12px 0px var(--color-dark); }
/* Header */
    header { position: sticky; top: 0; z-index: 1000; padding: 15px 5%; background: var(--color-dark); backdrop-filter: blur(10px); display: flex; justify-content: space-between; align-items: center; }
    .logo-container { height: 50px; width: 150px; display: flex; align-items: center; justify-content: flex-start; }
    .logo-img { height: 60px; max-width: 60px; object-fit: contain; }
    .logo-text { background: white; color: var(--color-dark); padding: 5px; border: 1px solid var(--color-accent); border-radius: var(--radius); font-weight: 900; text-transform: uppercase; font-size: 0.85rem; line-height: 1; display: flex; align-items: center; justify-content: center; text-align: center; width: 100%; height: 100%; overflow: hidden; word-break: break-word; }
    #header-cta { padding: 10px 20px; border: 3px solid var(--color-dark); font-size: 0.85rem; background: var(--color-background-light); box-shadow: none; border-radius: var(--radius); box-shadow: 4px 4px 0px var(--color-accent) ; }
/* Hero */
    #hero { background: var(--color-accent); position: relative; overflow: hidden; display: flex; flex-direction: column; align-items: center; z-index: 1; min-height: 80vh; }
    #hero::before { content: ""; position: absolute; width: 280px; height: 280px; top: 10%; left: -50px; background: repeating-linear-gradient(   45deg, var(--color-dark), var(--color-dark) 10px, transparent 10px, transparent 20px ); border: 4px solid var(--color-dark); border-radius: 50%; box-shadow: 12px 12px 0px rgba(0,0,0,0.15); z-index: -1; opacity: 0.8; }
    #hero::after { content: ""; position: absolute; width: 220px; height: 220px; bottom: 10%; right: 5%; background: var(--color-background-light); border: 4px solid var(--color-dark); border-radius: 50%; box-shadow: 15px 15px 0px var(--color-dark); z-index: -1; }
    .hero-container { display: flex; flex-direction: column; align-items: center; width: 100%; max-width: 1200px; margin: 60px auto; padding: 20px; position: relative; z-index: 2; }
    .hero-text-side { max-width: 100%; text-align: center; display: flex; flex-direction: column; align-items: center; }
    #hero-title { order: 1; color: var(--color-dark); text-transform: uppercase; text-shadow: 4px 4px 0px var(--color-background-light);    line-height: 1; }
    #hero-desc { order: 2; font-size: 1.3rem; color: var(--color-dark); margin-bottom: 40px; font-weight: 700; max-width: 650px; background: var(--color-background-light); padding: 10px; border: 3px solid var(--color-dark); border-radius: var(--radius); box-shadow: 6px 6px 0px var(--color-dark); }
    #hero-cta-btn { order: 3; }
    .hero-image-side { order: 5; width: 100%; max-width: 500px; margin-top: 50px; }
    .hero-img { width: 100%; height: 450px; border-radius: var(--radius); object-fit: cover; border: 5px solid var(--color-dark); box-shadow: 20px 20px 0px var(--color-dark); }
/* Chiffres clés */
    #figures-container { order: 4; margin-top: 50px; }
    .key-figures { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 50px; }
    .figure { background: var(--color-background-light); padding: 20px; border-radius: var(--radius); border: 3px solid var(--color-dark);        box-shadow: 6px 6px 0px var(--color-dark); width: 160px; text-align: center; transition: transform 0.2s ease; }
    .figure-num { display: block; font-size: 2.2rem; color: var(--color-dark); font-weight: 900; line-height: 1; margin-bottom: 5px; }
    .figure small { font-weight: 700; text-transform: uppercase; font-size: 0.75rem; color: var(--color-dark); letter-spacing: 1px; }
/* Services */
    .services-grid { display: grid; grid-template-columns: 1fr; gap: 20px; max-width: 1200px; margin: 0 auto; width: 100%; }
    .service-card { padding: 30px; background: var(--color-background-light); color: var(--color-dark-text); display: flex; flex-direction: column; transition: all 0.2s ease; border-radius: var(--radius); border: 3px solid var(--color-dark); box-shadow: 8px 8px 0px var(--color-dark); width: 100%; box-sizing: border-box; }
    .service-card:hover { transform: translate(-4px, -4px); box-shadow: 12px 12px 0px var(--color-dark); }
    .service-card h3 { font-size: 1.5rem; margin-bottom: 1rem; color: var(--color-dark); }
    .service-card p { font-size: 1rem; flex: 1; }
    .price-tag { align-self: flex-start; margin-top: 20px; padding: 8px 15px; background: var(--color-accent); color: var(--color-dark);        border-radius: var(--radius); font-weight: 800; font-size: 0.85rem; }
/* --- Testimonials --- */
    #testimonials-grid { display: grid; grid-template-columns: 1fr; gap: 30px; max-width: 1200px; margin: 0 auto; align-items: stretch; }
    .testimonial-card { background: white; padding: 30px; border-radius: var(--radius); border: 3px solid var(--color-dark); box-shadow: 8px 8px 0px var(--color-dark); transition: all 0.2s ease; display: flex; flex-direction: column; }
    .testimonial-card:hover { transform: translate(-4px, -4px); box-shadow: 12px 12px 0px var(--color-dark); }
    .testimonial-stars { color: var(--color-accent); font-size: 1.4rem; margin-bottom: 15px; letter-spacing: 2px; }
    .testimonial-text { font-style: italic; font-size: 1.1rem; font-weight: 600; margin-bottom: 20px; color: var(--color-dark); line-height: 1.4; flex: 1 }
    .testimonial-author { display: flex; flex-direction: column; border-top: 2px solid rgba(0,0,0,0.05); padding-top: 15px; }
    .author-name { font-weight: 900; text-transform: uppercase; color: var(--color-dark); font-size: 0.9rem; }
    .author-role { font-size: 0.8rem; font-weight: 700; color: var(--color-accent); }
    .testimonials-footer-cta { text-align: center; margin-top: 60px; padding: 40px; background: var(--color-dark); border-radius: var(--radius); color: white; border: 5px solid var(--color-dark); box-shadow: 15px 15px 0px var(--color-accent);}
    .testimonials-cta-phrase { font-size: 1.5rem; font-weight: 800; margin-bottom: 25px; }
/* Social Proof */
    #gallery-title {color: var(--color-background-light); }
    .gallery-grid { display: grid; grid-template-columns: 1fr; gap: 20px; padding: 20px; }
   .gallery-item { border-radius: var(--radius); overflow: visible; position: relative; }
    .gallery-item img { width: 100%; height: 100%; object-fit: cover; border-radius: var(--radius); border: 5px solid var(--color-dark); box-shadow: 15px 15px 0px var(--color-accent); }
    .gallery-caption { position: absolute; bottom: 5px; left: 5px; right: 5px; background: rgba(34, 33, 33, 0.89); backdrop-filter: blur(10px);
    color: white; padding: 12px; font-size: 0.85rem; font-weight: 600; line-height: 1.3; border-radius: 0 0 15px 15px; pointer-events: none; }
/* About */
    .about-img { width: 100%; max-width: 500px; height: 400px; border-radius: var(--radius); margin-bottom: 40px; object-fit: cover; border: 5px solid var(--color-dark); box-shadow: 20px 20px 0px var(--color-dark); }
/* Infos pratiques */
    #practical-title { color: var(--color-light-text);}
    .practical-container { display: flex; flex-direction: column; gap: 40px; max-width: 1200px; margin: 0 auto; }
    .practical-info, .practical-hours { padding: 40px; background: white; border: 3px solid var(--color-dark); border-radius: var(--radius);     box-shadow: 10px 10px 0px var(--color-accent); transition: transform 0.2s ease; }
    .practical-container h3 { font-size: 1.5rem; color: var(--color-dark); margin-bottom: 25px; text-transform: uppercase; background: var(--color-accent); display: inline-block; padding: 5px 15px; border: 2px solid var(--color-dark); border-radius: 10px; box-shadow: 4px 4px 0px var(--color-dark); }
    #practical-address { font-size: 1.4rem; font-weight: 800; color: var(--color-dark); line-height: 1.3; margin-bottom: 30px; }
    .hours-list { list-style: none; }
    .hours-list li { display: flex; justify-content: space-between; padding: 15px 10px; border-bottom: 3px solid var(--color-dark);      font-weight: 700; color: var(--color-dark); }
    .hours-list li span:first-child { text-transform: uppercase; }
    .hours-list li:last-child { border-bottom: none; }
    .planning-img { width: 100%; height: auto; border-radius: var(--radius); border: 4px solid var(--color-dark); box-shadow: 10px 10px 0px var(--color-accent); }
    #practical-map-btn { display: inline-block; margin-top: 10px; }
/* --- Faq --- */
    #faq-container { max-width: 800px; margin: 0 auto; }
    .faq-item { margin-bottom: 20px; border: 3px solid var(--color-dark); border-radius: var(--radius); background: white; overflow: hidden;  box-shadow: 6px 6px 0px var(--color-dark); transition: all 0.3s ease; }
    .faq-question { width: 100%; padding: 25px; background: none; border: none; text-align: left; font-family: var(--font-main); font-size: 1.2rem; font-weight: 800; color: var(--color-dark); cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .faq-question::after { content: '+'; font-size: 1.8rem; color: var(--color-accent); transition: transform 0.3s ease;  }
    .faq-item.open { background: var(--color-background-light); }
    .faq-item.open .faq-question::after { content: '-'; transform: rotate(180deg); }
    .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding 0.3s ease; padding: 0 25px; }
    .faq-item.open .faq-answer { max-height: 500px; padding: 0 25px 25px 25px; }
    .faq-answer p { color: var(--color-dark); font-weight: 500; line-height: 1.6; }
/* Contact Section */
    #contact-title {color: var(--color-dark);}
    #contact {background: var(--color-accent); text-align: center;}
    #contact-cta-btn { margin: 40px auto 0 auto; display: inline-block; }
/* Footer & Socials */
    footer { padding: 50px 5%; background: var(--color-dark); color: white; text-align: center; }
    .social-title { font-weight: 900; text-transform: uppercase; margin-bottom: 20px; font-size: 1.2rem; color: var(--color-accent); }
    .social-links { margin-bottom: 35px; display: flex; justify-content: center; gap: 25px; flex-wrap: wrap; }
    .social-links a { display: block; width: 40px; height: 40px; fill: var(--color-accent); transition: transform 0.2s ease; }
    .social-links a:hover { transform: scale(1.15); }
/* Mentions Légales */
    .legal-btn { background: none; border: none; color: #e9e3e3; cursor: pointer; font-size: 0.75rem; text-transform: uppercase; margin: 5px; }
    .legal-content { background: var(--color-dark); text-align: left; transition: max-height 0.4s ease-out; max-height: 0; overflow: hidden; font-size: 0.85rem; }
    .legal-content.open { max-height: 1200px; padding: 30px; border: 1px solid #333; margin-top: 10px; }
    .legal-content h4 { color: var(--color-accent); margin: 20px 0 10px; text-transform: uppercase; font-size: 0.9rem; }
    .legal-content p { margin-bottom: 10px; color: #ccc; line-height: 1.6; }
    .footer-copy { font-size: 0.75rem; color: #e9e3e3; margin-top: 30px; }
    .footer-credit { font-size: 0.75rem; color: #e9e3e3; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; }
    .footer-credit a { color: #e9e3e3; text-decoration: none; border-bottom: 1px solid var(--color-accent); }
/* Responsive */
    @media (min-width: 768px) {
        .section { padding: 120px 10%; }
        #hero { justify-content: center; padding: 0 5%;}
        .hero-container { flex-direction: row; justify-content: space-between; align-items: center; text-align: left; margin: 0 auto; padding: 20px; min-height: 100vh; }
        .hero-text-side { max-width: 55%; text-align: left; align-items: flex-start; }
        #hero-title { order: 1; }
        #hero-desc { order: 2; margin-bottom: 20px; } 
        #figures-container { order: 3; margin-top: 20px; margin-bottom: 40px; text-align: center; }
        #hero-cta-btn { order: 4; }
        .hero-image-side { order: 2; width: 40%; margin-top: 0; }
        .hero-img { width: 600px; height: 500px; }
        .services-grid { grid-template-columns: repeat(3, 1fr); gap: 30px; }
        .service-card { padding: 40px; }
        .service-card h3 { font-size: 1.8rem; }
        #testimonials-grid { grid-template-columns: repeat(3, 1fr); }
        .gallery-grid { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        #about-title {text-align: left;}
        .about-flex { display: flex; align-items: center; gap: 80px; }
        .about-img { margin-bottom: 0; }
        .practical-container { flex-direction: row; align-items: stretch; gap: 50px; }
        .practical-info, .practical-hours { flex: 1; }
        .faq-question { font-size: 1.3rem; }
    }
/* Animations */
    .reveal { opacity: 0; transform: translateY(20px); transition: 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
    .reveal.active { opacity: 1; transform: translateY(0); }
</style>
</head>
<body>
<header>
    <div id="logo-slot" class="logo-container"></div>
    <a href="#" id="header-cta" class="cta-button"></a>
</header>
<main>
    <section id="hero">
        <div class="hero-container">
            <div class="hero-text-side reveal">
                <h1 id="hero-title"></h1>
                <p id="hero-desc"></p>
                <a href="#services" id="hero-cta-btn" class="cta-button"></a>
                <div id="figures-container" class="key-figures"></div>
            </div>
            <div class="hero-image-side reveal">
                <img id="hero-img" src="" alt="Hero Image" class="hero-img" loading="lazy">
            </div>
        </div>
    </section>
    <section id="services" class="section reveal">
        <h2 id="services-title"></h2>
        <div id="services-grid" class="services-grid"></div>
    </section>
    <section id="testimonials" class="section reveal">
        <h2 id="testimonials-title"></h2>
        <div id="testimonials-grid" class="testimonials-grid"></div>
        <div id="testimonials-cta" class="testimonials-soft-cta reveal">
            <p id="testimonials-cta-text"></p>
        </div>
    </section>
    <section id="social-proof" class="section bg-dark">
        <h2 id="gallery-title"></h2>
        <div id="gallery-grid" class="gallery-grid"></div>
    </section>
    <section id="about" class="section reveal">
        <div class="about-flex">
            <img id="about-img" src="" alt="About" class="about-img" loading="lazy">
            <div class="about-text">
                <h2 id="about-title"></h2>
                <p id="about-desc"></p>
            </div>
        </div>
    </section>
    <section id="practical" class="section bg-dark">
    <h2 id="practical-title"></h2>
    <div class="practical-container">
        <div class="practical-info">
            <div class="address-block">
                <h3></h3>
                <p id="practical-address"></p>
                <a id="practical-map-btn" href="#" target="_blank" class="cta-button"></a>
            </div>
        </div>
        <div class="practical-hours">
            <h3></h3>
            <div id="hours-content"></div>
        </div>
        </div>
    </section>
    <section id="faq" class="section reveal">
        <h2 id="faq-title"></h2>
        <div id="faq-container" class="faq-container"></div>
    </section>
    <section id="contact" class="section reveal">
        <h2 id="contact-title"></h2>
        <p id="contact-desc"></p>
        <a href="#" id="contact-cta-btn" class="cta-button"></a>
    </section>
</main>
<footer class="bg-dark">
    <div id="social-head" class="social-title"></div>
    <div id="social-links" class="social-links"></div>
    <div class="legal-triggers">
        <button class="legal-btn" onclick="toggleLegal('m')">Mentions Légales</button>
        <button class="legal-btn" onclick="toggleLegal('c')">Confidentialité</button>
    </div>
    <div id="legal-m" class="legal-content"></div>
    <div id="legal-c" class="legal-content"></div>
    <p class="footer-copy">&copy; <span id="current-year"></span> - TOUS DROITS RÉSERVÉS.</p> 
    <p class="footer-credit">Vitrine Express réalisée avec <a href="https://www.am20.fr" target="_blank">AM 2.0</a></p>
</footer>
<script src="config.js"></script>
<script id="export-data" type="application/json">
/*CONFIG_EXPORT*/
</script>
<script>
const P_IMG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' fill='%23ddd'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' font-family='sans-serif' font-size='20' fill='%23999'%3EIMAGE%3C/text%3E%3C/svg%3E";

const SVGS = {
    linkedin: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M196.3 512L103.4 512L103.4 212.9L196.3 212.9L196.3 512zM149.8 172.1C120.1 172.1 96 147.5 96 117.8C96 103.5 101.7 89.9 111.8 79.8C121.9 69.7 135.6 64 149.8 64C164 64 177.7 69.7 187.8 79.8C197.9 89.9 203.6 103.6 203.6 117.8C203.6 147.5 179.5 172.1 149.8 172.1zM543.9 512L451.2 512L451.2 366.4C451.2 331.7 450.5 287.2 402.9 287.2C354.6 287.2 347.2 324.9 347.2 363.9L347.2 512L254.4 512L254.4 212.9L343.5 212.9L343.5 253.7L344.8 253.7C357.2 230.2 387.5 205.4 432.7 205.4C526.7 205.4 544 267.3 544 347.7L544 512L543.9 512z"/></svg>`,
    facebook: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M240 363.3L240 576L356 576L356 363.3L442.5 363.3L460.5 265.5L356 265.5L356 230.9C356 179.2 376.3 159.4 428.7 159.4C445 159.4 458.1 159.8 465.7 160.6L465.7 71.9C451.4 68 416.4 64 396.2 64C289.3 64 240 114.5 240 223.4L240 265.5L174 265.5L174 363.3L240 363.3z"/></svg>`,
    instagram: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320.3 205C256.8 204.8 205.2 256.2 205 319.7C204.8 383.2 256.2 434.8 319.7 435C383.2 435.2 434.8 383.8 435 320.3C435.2 256.8 383.8 205.2 320.3 205zM319.7 245.4C360.9 245.2 394.4 278.5 394.6 319.7C394.8 360.9 361.5 394.4 320.3 394.6C279.1 394.8 245.6 361.5 245.4 320.3C245.2 279.1 278.5 245.6 319.7 245.4zM413.1 200.3C413.1 185.5 425.1 173.5 439.9 173.5C454.7 173.5 466.7 185.5 466.7 200.3C466.7 215.1 454.7 227.1 439.9 227.1C425.1 227.1 413.1 215.1 413.1 200.3zM542.8 227.5C541.1 191.6 532.9 159.8 506.6 133.6C480.4 107.4 448.6 99.2 412.7 97.4C375.7 95.3 264.8 95.3 227.8 97.4C192 99.1 160.2 107.3 133.9 133.5C107.6 159.7 99.5 191.5 97.7 227.4C95.6 264.4 95.6 375.3 97.7 412.3C99.4 448.2 107.6 480 133.9 506.2C160.2 532.4 191.9 540.6 227.8 542.4C264.8 544.5 375.7 544.5 412.7 542.4C448.6 540.7 480.4 532.5 506.6 506.2C532.8 480 541 448.2 542.8 412.3C544.9 375.3 544.9 264.5 542.8 227.5zM495 452C487.2 471.6 472.1 486.7 452.4 494.6C422.9 506.3 352.9 503.6 320.3 503.6C287.7 503.6 217.6 506.2 188.2 494.6C168.6 486.8 153.5 471.7 145.6 452C133.9 422.5 136.6 352.5 136.6 319.9C136.6 287.3 134 217.2 145.6 187.8C153.4 168.2 168.5 153.1 188.2 145.2C217.7 133.5 287.7 136.2 320.3 136.2C352.9 136.2 423 133.6 452.4 145.2C472 153 487.1 168.1 495 187.8C506.7 217.3 504 287.3 504 319.9C504 352.5 506.7 422.6 495 452z"/></svg>`
};
const CONFIG = localConfig;
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
}, { threshold: 0.1 });
function addPrivacyParagraph(parent, title, text) {
    const h4 = document.createElement('h4');
    h4.textContent = title;
    const p = document.createElement('p');
    p.textContent = text;
    parent.append(h4, p);
}
function renderTemplate() {
// --- 0. Meta tags & Favicon Setup ---
const companyName = CONFIG.header.companyName || CONFIG.legal.companyName || "Entreprise";
document.title = CONFIG.meta.title || companyName;
const metaDesc = document.getElementById('meta-desc');
if (metaDesc) metaDesc.setAttribute('content', CONFIG.meta.description || `Bienvenue sur le site de ${companyName}`);
const r = document.documentElement.style;
const accentColor = CONFIG.colors.accent || '#1ECAD3';
r.setProperty('--color-accent', accentColor);
r.setProperty('--color-dark', CONFIG.colors.dark);
r.setProperty('--color-background-light', CONFIG.colors.bgLight);
// --- 1. Logo & Favicon Logic ---
const logoSlot = document.getElementById('logo-slot');
const fav = document.getElementById('favicon');
const favApple = document.getElementById('favicon-apple');
logoSlot.replaceChildren();
if (CONFIG.header.logo && CONFIG.header.logo.trim() !== "" && !CONFIG.header.useTextOnly) {
    // CAS A : LOGO ACTIF
    const img = document.createElement('img');
    img.src = CONFIG.header.logo; 
    img.className = "logo-img";
    img.alt = companyName;
    logoSlot.appendChild(img);

    if (fav) fav.href = CONFIG.header.logo;
    if (favApple) favApple.href = CONFIG.header.logo;
} else {
    // CAS B : TEXTE UNIQUEMENT (ou pas de logo fourni)
    const div = document.createElement('div');
    div.className = "logo-text"; 
    div.textContent = companyName;
    logoSlot.appendChild(div);
    const canvas = document.createElement('canvas');
    canvas.width = 64; canvas.height = 64;
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = accentColor;
    ctx.beginPath(); ctx.arc(32, 32, 32, 0, Math.PI * 2); ctx.fill();
    ctx.fillStyle = "#FFFFFF";
    ctx.font = "bold 38px sans-serif";
    ctx.textAlign = "center"; ctx.textBaseline = "middle";
    const initial = (companyName || "E").charAt(0).toUpperCase();
    ctx.fillText(initial, 32, 32);
    const dynamicIcon = canvas.toDataURL('image/png');
    if (fav) fav.href = dynamicIcon;
    if (favApple) favApple.href = dynamicIcon;
}
// 2. Textes
    document.getElementById('hero-title').textContent = CONFIG.hero.title;
    document.getElementById('hero-desc').textContent = CONFIG.hero.desc;
    document.getElementById('hero-cta-btn').textContent = CONFIG.hero.ctaLabel;
    document.getElementById('services-title').textContent = CONFIG.services.title;
    document.getElementById('gallery-title').textContent = CONFIG.gallery.title;
    document.getElementById('about-title').textContent = CONFIG.about.title;
    document.getElementById('about-desc').textContent = CONFIG.about.desc;
    document.getElementById('about-img').src = CONFIG.about.img || P_IMG;
    document.getElementById('hero-img').src = CONFIG.hero.img || P_IMG;
    document.getElementById('contact-title').textContent = CONFIG.contact.title;
    document.getElementById('contact-desc').textContent = CONFIG.contact.desc;
// 3. CTA dynamique (Header & Contact)
const contactBtns = [document.getElementById('header-cta'), document.getElementById('contact-cta-btn')];
contactBtns.forEach(btn => {
    if (!btn) return;
    btn.textContent = CONFIG.contact.ctaLabel || "Prendre RDV";
    btn.onclick = (e) => {
        if (!CONFIG.contact.value || CONFIG.contact.value.trim() === "") {
            e.preventDefault();
            return;
        }
        const type = CONFIG.contact.type ? CONFIG.contact.type.toUpperCase() : "LINK";
        let val = CONFIG.contact.value.trim();

        if (type === "EMAIL") {
            e.preventDefault();
            // Décodage si c'est de l'alternatif (base64) sinon direct
            try { if (val.includes('==')) val = atob(val); } catch(err) {}
            window.location.href = `mailto:${val}`;
        } 
        else if (type === "TEL") {
            e.preventDefault();
            window.location.href = `tel:${val.replace(/[^0-9+]/g, '')}`;
        } 
        else {
            window.open(val.startsWith('http') ? val : 'https://' + val, '_blank');
        }
    };
});
// 4. Figures
    const figCont = document.getElementById('figures-container');
    figCont.replaceChildren();
    if (CONFIG.hero.showFigures) {
        figCont.style.display = "flex";
        CONFIG.hero.figures.forEach(f => {
            const div = document.createElement('div');
            div.className = 'figure';
            const span = document.createElement('span');
            span.className = "figure-num";
            span.textContent = f.num;
            const small = document.createElement('small');
            small.textContent = f.label;
            div.append(span, small);
            figCont.appendChild(div);
        });
    } else {
        figCont.style.display = "none";
    }
// 5. Services
const servGrid = document.getElementById('services-grid');
if (servGrid && CONFIG.services && CONFIG.services.items) {
    servGrid.replaceChildren();

    CONFIG.services.items.forEach(s => {
        const card = document.createElement('div');
        card.className = 'service-card reveal';
        const h3 = document.createElement('h3');
        h3.textContent = s.h3 || "";
        const p = document.createElement('p');
        p.textContent = s.p || "";
        card.append(h3, p);
        const hasVisiblePrefix = s.showPrefix !== false && s.prefix && s.prefix.trim() !== "";
        const hasVisiblePrice = s.showPrice !== false && s.price && s.price.trim() !== "";
        if (hasVisiblePrefix || hasVisiblePrice) {
            const priceTag = document.createElement('div');
            priceTag.className = "price-tag";   
            let textParts = [];   
            
            if (hasVisiblePrefix) textParts.push(s.prefix.trim());  
            
            if (hasVisiblePrice) {
                const valPrix = s.price.trim();
                const isNumeric = !isNaN(parseFloat(valPrix)) && isFinite(valPrix);
                textParts.push(valPrix + (isNumeric ? "€" : ""));
            }
            priceTag.textContent = textParts.join(" ");
            card.appendChild(priceTag);
        }
        servGrid.appendChild(card);
        if (typeof observer !== 'undefined') observer.observe(card); 
    });
}
// 6. Testimonials
const testSection = document.getElementById('testimonials');
const testGrid = document.getElementById('testimonials-grid');

if (CONFIG.testimonials && CONFIG.testimonials.show) {
    testSection.style.display = "block"; 
    document.getElementById('testimonials-title').textContent = CONFIG.testimonials.title;
    testGrid.replaceChildren();
    
    CONFIG.testimonials.items.forEach(t => {
        const card = document.createElement('div');
        card.className = 'testimonial-card reveal';
        const starsDiv = document.createElement('div');
        starsDiv.className = 'testimonial-stars';
        starsDiv.textContent = '★'.repeat(t.stars) + '☆'.repeat(5 - t.stars);
        const p = document.createElement('p');
        p.className = 'testimonial-text';
        p.textContent = `"${t.text}"`;
        const author = document.createElement('div');
        author.className = 'testimonial-author';
        const nameSpan = document.createElement('span');
        nameSpan.className = "author-name";
        nameSpan.textContent = t.name;
        const roleSpan = document.createElement('span');
        roleSpan.className = "author-role";
        roleSpan.textContent = t.role;
        
        author.append(nameSpan, roleSpan);
        card.append(starsDiv, p, author);
        testGrid.appendChild(card);
        if (typeof observer !== 'undefined') observer.observe(card);
    });
    let softCta = document.getElementById('testimonials-soft-cta');
    if (!softCta) {
        softCta = document.createElement('div');
        softCta.id = 'testimonials-soft-cta';
        softCta.className = 'testimonials-footer-cta reveal';
        testSection.appendChild(softCta);
    }
    softCta.replaceChildren();
    const ctaPhrase = document.createElement('p');
    ctaPhrase.className = 'testimonials-cta-phrase';
    ctaPhrase.textContent = CONFIG.testimonials.ctaText || "Prêt à passer à l'action ?";
    const ctaBtn = document.createElement('a');
    ctaBtn.className = 'cta-button';
    ctaBtn.textContent = CONFIG.contact.ctaLabel || "Prendre RDV";
    ctaBtn.href = "#";
    ctaBtn.onclick = (e) => {
        e.preventDefault();
        if (!CONFIG.contact.value || CONFIG.contact.value.trim() === "") return;

        let val = CONFIG.contact.value.trim();
        const type = CONFIG.contact.type ? CONFIG.contact.type.toUpperCase() : "LINK";

        if (type === "EMAIL" || type === "MAIL") { 
            try { if (val.includes('==')) val = atob(val); } catch(err) {}
            window.location.href = `mailto:${val}`; 
        }
        else if (type === "TEL") { 
            window.location.href = `tel:${val.replace(/\s/g, '')}`; 
        }
        else { 
            const url = val.startsWith('http') ? val : 'https://' + val;
            window.open(url, '_blank'); 
        }
    };
    softCta.append(ctaPhrase, ctaBtn);
    if (typeof observer !== 'undefined') observer.observe(softCta);

} else {
    if (testSection) testSection.style.display = "none"; 
}
// 7. Galerie
    const galGrid = document.getElementById('gallery-grid');
    galGrid.replaceChildren();
    CONFIG.gallery.images.forEach(imgData => {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        const img = document.createElement('img');
        img.src = imgData.src || P_IMG;
        img.loading = "lazy";
        const cap = document.createElement('div');
        cap.className = "gallery-caption";
        cap.textContent = imgData.cap;
        item.append(img, cap);
        galGrid.appendChild(item);
    });
// 8. Infos Pratiques 
const practicalSection = document.getElementById('practical');
if (CONFIG.practical && CONFIG.practical.show) {
    if (practicalSection) practicalSection.style.display = "block";
    const mainTitle = document.getElementById('practical-title');
    if (mainTitle) mainTitle.textContent = CONFIG.practical.title || "Infos Pratiques";
    const infoBlockH3 = practicalSection.querySelector('.practical-info h3');
    const hoursBlockH3 = practicalSection.querySelector('.practical-hours h3');
    if (infoBlockH3) infoBlockH3.textContent = CONFIG.practical.locationTitle || "Notre Emplacement";
    if (hoursBlockH3) hoursBlockH3.textContent = CONFIG.practical.hoursTitle || "Nos Horaires";
    const addrEl = document.getElementById('practical-address');
    if (addrEl) addrEl.textContent = CONFIG.practical.address || "Adresse non renseignée";
    const mapBtn = document.getElementById('practical-map-btn');
    if (mapBtn) {
        const isVisible = CONFIG.practical.showMapBtn !== false;
        mapBtn.style.display = isVisible ? "inline-flex" : "none";
        mapBtn.textContent = CONFIG.practical.mapBtnLabel || "Voir l'itinéraire";
        mapBtn.href = CONFIG.practical.mapsLink || "#";
    }
    const hoursContent = document.getElementById('hours-content');
    if (hoursContent) {
        hoursContent.replaceChildren();
        if (CONFIG.practical.displayMode === 'image') {
            const img = document.createElement('img');
            img.src = CONFIG.practical.hoursImg || P_IMG;
            img.className = "planning-img";
            img.alt = "Planning";
            img.loading = "lazy";
            hoursContent.appendChild(img);
        } else {
            const ul = document.createElement('ul');
            ul.className = "hours-list";
            const defaultLabels = ["Lun - Ven", "Samedi", "Dimanche"];
            defaultLabels.forEach((label, index) => {
                const li = document.createElement('li');
                const userItem = (CONFIG.practical.hoursItems && CONFIG.practical.hoursItems[index]) ? CONFIG.practical.hoursItems[index] : null;
                const userTime = userItem ? userItem.time : "";
                const spanLabel = document.createElement('span');
                spanLabel.textContent = label; 
                const spanTime = document.createElement('span');
                if (userTime && userTime.trim() !== "") {
                    spanTime.textContent = userTime;
                } else {
                    spanTime.textContent = "—";
                    spanTime.className = "opacity-40";
                }
                li.append(spanLabel, spanTime);
                ul.appendChild(li);
            });
            hoursContent.appendChild(ul);
        }
    }
    if (typeof observer !== 'undefined' && practicalSection) {
        observer.observe(practicalSection);
    }
} else {
    if (practicalSection) practicalSection.style.display = "none";
}
// 9. FAQ
const faqSection = document.getElementById('faq');
const faqCont = document.getElementById('faq-container');

if (CONFIG.faq && CONFIG.faq.show && CONFIG.faq.items.length > 0) {
    faqSection.style.display = "block";
    document.getElementById('faq-title').textContent = CONFIG.faq.title;
    faqCont.replaceChildren();
    const countToDisplay = CONFIG.faq.displayCount || 3;
    CONFIG.faq.items.slice(0, countToDisplay).forEach(item => {
        const div = document.createElement('div');
        div.className = 'faq-item';
        const btn = document.createElement('button');
        btn.className = 'faq-question';
        btn.textContent = item.q;
        const ans = document.createElement('div');
        ans.className = 'faq-answer';
        const p = document.createElement('p');
        p.textContent = item.a;
        ans.appendChild(p);
        btn.onclick = () => {
            const isOpen = div.classList.contains('open');
            document.querySelectorAll('.faq-item').forEach(i => i.classList.remove('open'));
            if (!isOpen) div.classList.add('open');
        };

        div.append(btn, ans);
        faqCont.appendChild(div);
    });
} else {
    faqSection.style.display = "none";
}
// 10. Socials
    const socHead = document.getElementById('social-head');
    const socLinks = document.getElementById('social-links');
    socLinks.replaceChildren();
    socHead.textContent = CONFIG.socials.title || "Suivez-nous";

    let hasSocial = false;
    for (const [key, url] of Object.entries(CONFIG.socials)) {
        if (key !== "title" && url && url.trim() !== "" && url !== "#") {
            hasSocial = true;
            const a = document.createElement('a');
            a.href = url; a.target = "_blank"; a.rel = "noopener noreferrer";
            a.innerHTML = SVGS[key]; 
            socLinks.appendChild(a);
        }
    }
    socHead.style.display = hasSocial ? "block" : "none";
// 11. Mentions légales 
const m = document.getElementById('legal-m');
if (m) {
    m.replaceChildren();

    const addLegalSection = (parent, title, lines) => {
        const h4 = document.createElement('h4');
        h4.textContent = title;
        parent.appendChild(h4);
        lines.forEach(line => {
            // On affiche la ligne si la valeur existe OU si on veut forcer l'affichage
            const displayVal = (line.val && line.val.trim() !== "") ? line.val : "Non renseigné";
            
            const p = document.createElement('p');
            const strong = document.createElement('strong');
            strong.textContent = line.label + " : ";
            p.appendChild(strong);
            p.appendChild(document.createTextNode(displayVal));
            parent.appendChild(p);
        });
    };

    const leg = CONFIG.legal || {};
    const country = leg.country || 'FR';
    const type = leg.entityType || 'pro';
    
    // Définition des libellés selon le pays
    let labelID1 = "SIRET";
    let labelID2 = "SIREN";

    if (country === 'FR') {
        labelID1 = (type === 'asso') ? "N° RNA" : "SIRET";
        labelID2 = "SIRET (si applicable)";
    } else if (country === 'BE') {
        labelID1 = "BCE"; 
        labelID2 = "N° TVA";
    } else if (country === 'LU') {
        labelID1 = "N° RCS"; 
        labelID2 = "N° Matricule";
    }

    const entityLabel = (type === 'asso') ? "Nom de l'association" : "Raison Sociale";

    // Préparation des données avec fallback
    let contactDisplay = "";
    if (leg.contactValue) {
        try { contactDisplay = atob(leg.contactValue); } catch(e) { contactDisplay = leg.contactValue; }
    }

    const editorFullName = `${leg.firstName || ''} ${leg.lastName || ''}`.trim();

    // Construction du tableau (Toutes les lignes sont présentes par défaut)
    const editionLines = [
        { label: "Éditeur", val: editorFullName },
        { label: entityLabel, val: leg.companyName },
        { label: "Adresse", val: leg.address },
        { label: "Contact", val: contactDisplay },
        { label: labelID1, val: leg.id1 },
        { label: labelID2, val: leg.id2 }
    ];

    addLegalSection(m, "Édition du site", editionLines);

    addLegalSection(m, "Hébergement", [
        { label: "Hébergeur", val: "Netlify Inc." },
        { label: "Adresse", val: "610 22nd Street, San Francisco, CA 94107, USA" }
    ]);
}
// 12. Politique de Confidentialité 
    const c = document.getElementById('legal-c');
    c.replaceChildren();
    addPrivacyParagraph(c, "Protection des données (RGPD)", "Ce site est purement informatif. Il ne contient aucun formulaire de contact ou d'inscription. Par conséquent, aucune donnée personnelle n'est collectée, stockée ou traitée par ce site.");
    addPrivacyParagraph(c, "Cookies et traceurs", "Ce site est une page statique. Nous n'utilisons aucun cookie de suivi, de profilage ou de publicité. Aucun traceur tiers n'est installé sur votre navigateur lors de votre visite.");
    addPrivacyParagraph(c, "Liens tiers", "Si vous cliquez sur les boutons de contact (ex: 'Prendre RDV'), vous serez redirigé vers une plateforme externe. Dès lors que vous quittez ce site, seule la politique de confidentialité de la plateforme de destination s'applique.");

    document.getElementById('current-year').textContent = new Date().getFullYear();
}
window.addEventListener('message', (event) => {
    if(event.data.type === 'UPDATE_CONFIG') {
        Object.assign(CONFIG, event.data.config);
        renderTemplate();
    }
    if(event.data.type === 'GET_CONFIG') {
        window.parent.postMessage({ type: 'SEND_CONFIG', config: CONFIG }, '*');
    }
    if(event.data.type === 'SCROLL_TO') {
        const target = document.getElementById(event.data.section);
        if(target){
            target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            target.style.transition = "outline 0.3s";
            target.style.outline = `4px solid ${CONFIG.colors.accent}`;
            setTimeout(() => target.style.outline = "none", 1500);
        }
    }
});
try {
    const savedData = document.getElementById('export-data').textContent.trim();
    if (savedData && !savedData.includes('CONFIG_EXPORT')) {
        const parsed = JSON.parse(savedData);
        Object.assign(CONFIG, parsed);
    }
} catch(e) { console.error("Erreur import", e); }
renderTemplate();
document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
function toggleLegal(id) {
    const target = document.getElementById('legal-' + id);
    document.querySelectorAll('.legal-content').forEach(c => { if(c !== target) c.classList.remove('open'); });
    target.classList.toggle('open');
}
</script>
</body>
</html>