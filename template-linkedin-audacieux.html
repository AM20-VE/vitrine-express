<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <style>
    :root {
        --color-dark: #222222;
        --color-background-light: #f5f5dc;
        --color-accent: #ffbf00; 
        --border-size: 8px; 
        --border-dark: var(--border-size) solid var(--color-dark);
        --font-main: system-ui, -apple-system, sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font-main); background: #e0e0e0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
    .branding-kit-container { width: 100%; max-width: 1200px; display: flex; flex-direction: column; gap: 40px; align-items: center; }
    .asset-group { width: 100%; display: flex; flex-direction: column; align-items: center; }
    .preview-label { font-weight: 900; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; margin-bottom: 15px; color: white; background: var(--color-dark); padding: 5px 15px; border-radius: 0; }
    .banner-wrapper, .vignette-wrapper { width: 100%; background: white; border: var(--border-dark); overflow: hidden; position: relative; box-shadow: 15px 15px 0px rgba(0,0,0,0.2); }
    .vignettes-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; width: 100%; }
    #linkedin-banner, .vignette { overflow: hidden; position: absolute; top: 0; left: 0; transform-origin: top left; }
    #linkedin-banner::before, .vignette::before { content: ""; position: absolute; width: 200%; height: 200%; top: -50%; left: -50%;         background-image: linear-gradient(45deg, var(--color-accent) 25%, transparent 25%, transparent 50%, var(--color-accent) 50%, var(--color-accent) 75%, transparent 75%, transparent); background-size: 60px 60px;  opacity: 0.8;  z-index: 1; transform: rotate(-5deg); }
    #linkedin-banner::after, .vignette::after { content: ""; position: absolute; bottom: 0; right: 0; width: 100%; height: 40%;         background: var(--color-dark); clip-path: polygon(0 100%, 100% 100%, 100% 0); z-index: 1; }
    #linkedin-banner { width: 1584px; height: 396px; background-color: var(--color-background-light); display: flex; flex-direction: column;      justify-content: center; align-items: flex-start; padding: 0 80px 0 520px; }
    .li-logo-container { position: absolute; top: 40px; left: 40px; height: 110px;  width: fit-content; display: flex; align-items: center;        z-index: 20; }
    .li-logo-img { height: 100%; width: auto; max-width: 320px; object-fit: contain; background: white; padding: 10px; border: var(--border-dark); box-shadow: 10px 10px 0px rgba(0,0,0,0.2); }
    .li-logo-text { height: 90px; background: white; color: var(--color-dark); padding: 0 30px; border: var(--border-dark); box-shadow: 10px 10px 0px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; font-weight: 900; text-transform: uppercase;      font-size: 1.8rem; letter-spacing: 1px; line-height: 1; white-space: nowrap; }
   .banner-title { position: relative; z-index: 10; background: white; padding: 20px 40px; border: var(--border-dark); box-shadow: 12px 12px 0px var(--color-dark); color: var(--color-dark); font-size: 62px; font-weight: 900; text-transform: uppercase; line-height: 1; margin-bottom: 30px; display: table; }
  .banner-key-figures { position: relative; z-index: 10; display: flex; gap: 20px; width: 100%; max-width: 950px; justify-content: center;
    padding-left: 0; }
    .key-item { background: var(--color-dark); padding: 12px 20px; border: 3px solid var(--color-accent); box-shadow: 6px 6px 0px var(--color-accent); color: white; font-weight: 900; font-size: 20px; text-transform: uppercase; white-space: nowrap; }
    .key-item .check-icon { display: none; }
    .vignette { width: 1200px; height: 627px; background-color: var(--color-background-light); display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 100px; }
    .v2-dark { background-color: var(--color-dark) !important; }
    .v2-dark::before { opacity: 0.1; }
    .vignette-title { position: relative; z-index: 10; background: white; padding: 30px; border: var(--border-dark); box-shadow: 15px 15px 0px var(--color-dark); font-size: 70px; font-weight: 900; margin-bottom: 50px; text-transform: uppercase; line-height: 1; color: var(--color-dark); }
    .v2-dark .vignette-title { box-shadow: 15px 15px 0px var(--color-accent); }
    .cta-mimic { position: relative; z-index: 10; padding: 25px 50px; background: var(--color-accent); color: var(--color-dark); border: var(--border-dark); font-weight: 900; font-size: 35px; text-transform: uppercase; box-shadow: 10px 10px 0px var(--color-dark); }
    .v2-dark .cta-mimic { background: white; }
    .bottom-right-icon { position: absolute; bottom: 80px; right: 100px; z-index: 10; color: white; transform: rotate(-5deg); }
    @media (max-width: 768px) { .vignettes-grid { grid-template-columns: 1fr; } }
</style>
</head>
<body>
    <div class="branding-kit-container"> 
        <div class="asset-group">
            <div class="preview-label">Bannière LinkedIn</div>
            <div class="banner-wrapper" id="b-wrap">
                <div id="linkedin-banner">
                    <div id="li-logo-slot" class="li-logo-container"></div>
                    <div class="decor-circle circle-stripe"></div>
                    <h1 class="banner-title" id="li-title"></h1>
                    <div id="li-figures" class="banner-key-figures"></div>
                </div>
            </div>
        </div>
        <div class="vignettes-grid">
            <div class="asset-group">
                <div class="preview-label">Vignette Contact</div>
                <div class="vignette-wrapper" id="v1-wrap">
                    <div id="v1" class="vignette v1-light">
                        <h2 class="vignette-title" id="v1-title">Discutons de votre projet</h2>
                        <div class="cta-mimic" id="v1-cta"></div>
                        <div class="bottom-right-icon">
                            <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                        </div>
                    </div>
                </div>
            </div>
            <div class="asset-group">
                <div class="preview-label">Vignette Offre</div>
                <div class="vignette-wrapper" id="v2-wrap">
                    <div id="v2" class="vignette v2-dark">
                        <h2 class="vignette-title" id="v2-title">Découvrir mon univers</h2>
                        <div class="cta-mimic" id="v2-cta">Voir l'offre</div>
                        <div class="bottom-right-icon">
                            <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent)" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     <script>
    let CONFIG = {};
    function rescale() {
        const bWrap = document.getElementById('b-wrap');
        const v1Wrap = document.getElementById('v1-wrap');
        if(!bWrap || !v1Wrap) return;
        const bScale = bWrap.offsetWidth / 1584;
        document.getElementById('linkedin-banner').style.transform = `scale(${bScale})`;
        bWrap.style.height = (396 * bScale) + 'px';
        const vScale = v1Wrap.offsetWidth / 1200;
        const v1 = document.getElementById('v1');
        const v2 = document.getElementById('v2');
        if(v1) v1.style.transform = `scale(${vScale})`;
        if(v2) v2.style.transform = `scale(${vScale})`;
        v1Wrap.style.height = (627 * vScale) + 'px';
        const v2Wrap = document.getElementById('v2-wrap');
        if(v2Wrap) v2Wrap.style.height = (627 * vScale) + 'px';
    }
    function updateUI(config) {
        if(!config || !config.colors) return;
        const r = document.documentElement.style;
        r.setProperty('--color-accent', config.colors.accent);
        r.setProperty('--color-dark', config.colors.dark);
        r.setProperty('--color-background-light', config.colors.bgLight);
        // GESTION DU LOGO / NOM
        const logoSlot = document.getElementById('li-logo-slot');
        if (logoSlot) {
            const showLogo = config.linkedinKit?.showLogo !== false; 
            if (!showLogo) {
                logoSlot.style.display = 'none';
            } else {
                logoSlot.style.display = 'flex';
                logoSlot.innerHTML = '';
                
                const h = config.header || {}; 
                if (h.useTextOnly) {
                    const txt = document.createElement('div');
                    txt.className = 'li-logo-text';
                    txt.textContent = h.companyName || "MON ENTREPRISE";
                    logoSlot.appendChild(txt);
                } else if (h.logo) {
                    const img = document.createElement('img');
                    img.src = h.logo;
                    img.className = 'li-logo-img';
                    logoSlot.appendChild(img);
                }
            }
        }
        if(document.getElementById('li-title')) {
            document.getElementById('li-title').textContent = config.hero.title;
        }
        if(document.getElementById('v1-title')) {
            document.getElementById('v1-title').textContent = config.vignette1Title || "Discutons de votre projet";
        }
        if(document.getElementById('v1-cta')) {
            document.getElementById('v1-cta').textContent = config.contact.ctaLabel || "PRENDRE RDV";
        }
        if(document.getElementById('v2-title')) {
            document.getElementById('v2-title').textContent = config.vignette2Title || config.about.title || "Découvrir mon univers";
        }
        if(document.getElementById('v2-cta')) {
            document.getElementById('v2-cta').textContent = config.vignette2Cta || "Voir l'offre";
        }
        const figCont = document.getElementById('li-figures');
        if (figCont) {
            figCont.replaceChildren();
            if (config.hero.showFigures && config.hero.figures) {
                config.hero.figures.forEach(f => {
                    const item = document.createElement('div');
                    item.className = 'key-item';
                    item.innerHTML = `<div class="check-icon"></div> ${f.label}`;
                    figCont.appendChild(item);
                });
            }
        }
        rescale();
    }
    window.addEventListener('message', (e) => {
        if(e.data.type === 'UPDATE_CONFIG' || e.data.type === 'SET_INITIAL_CONFIG') {
            CONFIG = e.data.config;
            updateUI(CONFIG);
        }
    });
    window.onload = () => {
        rescale();
        window.parent.postMessage({ type: 'GET_CONFIG' }, '*');
    };
    window.onresize = rescale;
</script>
</body>
</html>