<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --color-dark: #0E1B2A;
            --color-background-light: #F2F4F7; 
            --color-accent: #1ECAD3; 
            --font-main: 'Inter', system-ui, -apple-system, sans-serif;
            --radius: 12px; 
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-main); background: #f0f2f5; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .branding-kit-container { width: 100%; max-width: 1200px; display: flex; flex-direction: column; gap: 30px; align-items: center; }
        .asset-group { width: 100%; display: flex; flex-direction: column; align-items: center; }
        .preview-label { font-weight: 900; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; margin-bottom: 10px; color: var(--color-dark); opacity: 0.6; }
        .banner-wrapper, .vignette-wrapper { width: 100%; background: white; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); overflow: hidden; position: relative; }
        .vignettes-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; }
        #linkedin-banner, .vignette { overflow: hidden; position: absolute; top: 0; left: 0; transform-origin: top left; z-index: 1; }
        #linkedin-banner::before, .vignette::before,
        #linkedin-banner::after, .vignette::after { content: ""; position: absolute; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: 0.4; }
        #linkedin-banner::before, .vignette::before { width: 400px; height: 400px; background: var(--color-accent); top: -100px; right: -100px; }
        #linkedin-banner::after, .vignette::after { width: 300px; height: 300px; background: var(--color-dark); bottom: -50px; left: -50px; }
        .li-logo-container { position: absolute; top: 40px; left: 80px; height: 100px; width: 300px; display: flex; align-items: center;          z-index: 10; }
        .li-logo-img { max-height: 100%; max-width: 100%; object-fit: contain; border-radius: var(--radius); }
        .li-logo-text { background: white; color: var(--color-dark); padding: 10px 20px; border: 2px solid var(--color-accent);            border-radius: var(--radius); font-weight: 900; text-transform: uppercase; font-size: 1.8rem; line-height: 1; display: flex;            align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .hero-curves { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .curve-accent { stroke: var(--color-accent); stroke-width: 3; stroke-opacity: 0.4; fill: none; }
        .curve-dark { stroke: var(--color-dark); stroke-width: 2; stroke-opacity: 0.15; fill: none; }
        #linkedin-banner { width: 1584px; height: 396px; background-color: var(--color-background-light); display: flex; flex-direction: column; justify-content: center; padding-left: 550px; padding-right: 80px; }
        .banner-title { position: relative; z-index: 2; color: var(--color-dark); font-size: 58px; font-weight: 800; line-height: 1.1; margin-bottom: 20px; }
        .banner-key-figures { position: relative; z-index: 2; display: flex; gap: 30px; flex-wrap: nowrap; width: 100%; }
        .key-item { display: flex; align-items: center; gap: 10px; color: var(--color-dark); font-weight: 700; font-size: 24px; white-space: nowrap; flex-shrink: 0; }
        .check-icon { width: 28px; height: 28px; background: var(--color-accent); border-radius: 6px; display: flex; align-items: center; justify-content: center; }
        .check-icon::after { content: ''; width: 6px; height: 12px; border: solid var(--color-dark); border-width: 0 3px 3px 0; transform: rotate(45deg); margin-bottom: 2px; }
        .vignette { width: 1200px; height: 627px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 100px; }
        .v1-light { background-color: var(--color-background-light); }
        .v2-dark { background-color: var(--color-dark); color: white; }
        .v2-dark::after { background: var(--color-accent); opacity: 0.2; } 
        .v1-light::after { background: var(--color-accent); opacity: 0.2; } 
        .vignette-title { position: relative; z-index: 2; font-size: 72px; font-weight: 800; margin-bottom: 40px; line-height: 1.1; }
        .cta-mimic { padding: 25px 50px; background: var(--color-accent); color: var(--color-dark); border-radius: var(--radius); font-weight: 800; font-size: 32px; border: 3px solid var(--color-dark); text-transform: uppercase; z-index: 2; }
        .bottom-right-icon { position: absolute; bottom: 80px; right: 120px; z-index: 2; opacity: 0.4; }
        @media (max-width: 768px) { .vignettes-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="branding-kit-container"> 
        <div class="asset-group">
            <div class="preview-label">Bannière LinkedIn</div>
            <div class="banner-wrapper" id="b-wrap">
                <div id="linkedin-banner">
                    <div id="li-logo-slot" class="li-logo-container"></div>
                        <svg class="hero-curves" viewBox="0 0 1584 396" preserveAspectRatio="none">
                            <path class="curve-accent" d="M-100 200 Q 400 450 800 200 T 1700 200" />
                            <path class="curve-dark" d="M-100 150 Q 500 400 900 150 T 1700 150" />
                        </svg>
                    <h1 class="banner-title" id="li-title"></h1>
                    <div id="li-figures" class="banner-key-figures"></div>
                </div>
            </div>
        </div>
        <div class="vignettes-grid">
            <div class="asset-group">
                <div class="preview-label">Vignette Contact</div>
                <div class="vignette-wrapper" id="v1-wrap">
                    <div id="v1" class="vignette v1-light">
                        <h2 class="vignette-title" id="v1-title">Discutons de vos besoins</h2>
                        <div class="cta-mimic" id="v1-cta"></div>
                        <div class="bottom-right-icon">
                            <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                        </div>
                    </div>
                </div>
            </div>
            <div class="asset-group">
                <div class="preview-label">Vignette Offre</div>
                <div class="vignette-wrapper" id="v2-wrap">
                    <div id="v2" class="vignette v2-dark">
                        <h2 class="vignette-title" id="v2-title">Découvrir mon univers</h2>
                        <div class="cta-mimic" id="v2-cta">Voir l'offre</div>
                        <div class="bottom-right-icon">
                            <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent)" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   <script>
    let CONFIG = {};
    function rescale() {
        const bWrap = document.getElementById('b-wrap');
        const v1Wrap = document.getElementById('v1-wrap');
        if(!bWrap || !v1Wrap) return;
        const bScale = bWrap.offsetWidth / 1584;
        document.getElementById('linkedin-banner').style.transform = `scale(${bScale})`;
        bWrap.style.height = (396 * bScale) + 'px';
        const vScale = v1Wrap.offsetWidth / 1200;
        const v1 = document.getElementById('v1');
        const v2 = document.getElementById('v2');
        if(v1) v1.style.transform = `scale(${vScale})`;
        if(v2) v2.style.transform = `scale(${vScale})`;
        v1Wrap.style.height = (627 * vScale) + 'px';
        const v2Wrap = document.getElementById('v2-wrap');
        if(v2Wrap) v2Wrap.style.height = (627 * vScale) + 'px';
    }
    function updateUI(config) {
        if(!config || !config.colors) return;
        const r = document.documentElement.style;
        r.setProperty('--color-accent', config.colors.accent);
        r.setProperty('--color-dark', config.colors.dark);
        r.setProperty('--color-background-light', config.colors.bgLight);
       // GESTION DU LOGO / NOM
        const logoSlot = document.getElementById('li-logo-slot');
        if (logoSlot) {
            const showLogo = config.linkedinKit?.showLogo !== false; 
            if (!showLogo) {
                logoSlot.style.display = 'none';
            } else {
                logoSlot.style.display = 'flex';
                logoSlot.innerHTML = '';
                
                const h = config.header || {}; 
                if (h.useTextOnly) {
                    const txt = document.createElement('div');
                    txt.className = 'li-logo-text';
                    txt.textContent = h.companyName || "MON ENTREPRISE";
                    logoSlot.appendChild(txt);
                } else if (h.logo) {
                    const img = document.createElement('img');
                    img.src = h.logo;
                    img.className = 'li-logo-img';
                    logoSlot.appendChild(img);
                }
            }
        }
        if(document.getElementById('li-title')) {
            document.getElementById('li-title').textContent = config.hero.title;
        }
        if(document.getElementById('v1-title')) {
            document.getElementById('v1-title').textContent = config.vignette1Title || "Discutons de votre projet";
        }
        if(document.getElementById('v1-cta')) {
            document.getElementById('v1-cta').textContent = config.contact.ctaLabel || "PRENDRE RDV";
        }
        if(document.getElementById('v2-title')) {
            document.getElementById('v2-title').textContent = config.vignette2Title || config.about.title || "Découvrir mon univers";
        }
        if(document.getElementById('v2-cta')) {
            document.getElementById('v2-cta').textContent = config.vignette2Cta || "Voir l'offre";
        }
        const figCont = document.getElementById('li-figures');
        if (figCont) {
            figCont.replaceChildren();
            if (config.hero.showFigures && config.hero.figures) {
                config.hero.figures.forEach(f => {
                    const item = document.createElement('div');
                    item.className = 'key-item';
                    item.innerHTML = `<div class="check-icon"></div> ${f.label}`;
                    figCont.appendChild(item);
                });
            }
        }
        rescale();
    }
    window.addEventListener('message', (e) => {
        if(e.data.type === 'UPDATE_CONFIG' || e.data.type === 'SET_INITIAL_CONFIG') {
            CONFIG = e.data.config;
            updateUI(CONFIG);
        }
    });
    window.onload = () => {
        rescale();
        window.parent.postMessage({ type: 'GET_CONFIG' }, '*');
    };
    window.onresize = rescale;
</script>
</body>
</html>