document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("current-year"),t=document.getElementById("preview-modal");e&&(e.textContent=(new Date).getFullYear());const n=()=>{t&&(t.classList.add("hidden"),t.classList.remove("flex"),document.body.style.overflow="")};window.openPreview=()=>{t&&(t.classList.remove("hidden"),t.classList.add("flex"),document.body.style.overflow="hidden")},window.closePreview=n,t&&t.addEventListener("click",e=>{e.target===t&&n()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&n()});const s=()=>{const e=document.getElementById("timeline-container"),t=document.getElementById("progress-line"),n=document.querySelectorAll(".step-container");if(!e||!t)return;const s=e.getBoundingClientRect(),a=window.innerHeight/1.5,o=Math.max(0,Math.min(100,(a-s.top)/s.height*100));t.style.height=`${o}%`,n.forEach(e=>{const t=e.querySelector(".timeline-dot"),n=e.querySelector(".ghost-text"),s=e.getBoundingClientRect();s.top+s.height/4<a?(t&&t.classList.add("bg-validate","scale-125"),n&&n.classList.add("active")):(t&&t.classList.remove("bg-validate","scale-125"),n&&n.classList.remove("active"))})};let a=!1;document.querySelectorAll(".calendly-popup-trigger").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),(a?Promise.resolve():new Promise(e=>{const t=document.createElement("link");t.href="https://assets.calendly.com/assets/external/widget.css",t.rel="stylesheet",document.head.appendChild(t);const n=document.createElement("script");n.src="https://assets.calendly.com/assets/external/widget.js",n.async=!0,n.onload=()=>{a=!0,e()},document.body.appendChild(n)})).then(()=>{window.Calendly&&Calendly.initPopupWidget({url:"https://calendly.com/aurore-am20/20min?hide_event_type_details=1&text_color=14244f&primary_color=4d0fa5"})})})}),document.querySelectorAll(".protected-mail").forEach(e=>{const t=e.dataset.user,n=e.dataset.domain;if(!t||!n)return;const s=`${t}@${n}`,a=e.querySelector("svg");e.textContent="",a&&e.appendChild(a),e.appendChild(document.createTextNode(s)),e.href=`mailto:${s}`}),(()=>{const e=document.querySelectorAll(".faq-item");e.forEach(t=>{const n=t.querySelector(".faq-toggle"),s=t.querySelector(".faq-content");n&&s&&n.addEventListener("click",()=>{const a=t.classList.contains("is-open");e.forEach(e=>{e!==t&&e.classList.contains("is-open")&&(e.querySelector(".faq-content").style.maxHeight="0",e.classList.remove("is-open"),e.querySelector(".faq-toggle").setAttribute("aria-expanded","false"))}),t.classList.toggle("is-open",!a),s.style.maxHeight=a?"0":s.scrollHeight+"px",n.setAttribute("aria-expanded",String(!a))})})})(),document.querySelectorAll(".cta-accent, .calendly-popup-trigger").forEach(e=>{e.addEventListener("click",function(e){if(this.classList.contains("animating"))return;this.classList.add("animating");const t=document.createElement("span");t.classList.add("ripple-circle"),this.appendChild(t),requestAnimationFrame(()=>{t.classList.add("ripple-animate")}),setTimeout(()=>{this.classList.add("cta-clicked")},100),setTimeout(()=>{this.classList.remove("cta-clicked","animating")},1e3),t.addEventListener("animationend",()=>{t.remove()})})}),(()=>{const e=document.querySelectorAll(".animate-on-scroll"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.classList.add("animated","opacity-100","translate-y-0"),t.classList.remove("opacity-0","translate-y-10")}})},{threshold:.1});e.forEach(e=>t.observe(e))})(),s(),window.addEventListener("scroll",s,{passive:!0})});